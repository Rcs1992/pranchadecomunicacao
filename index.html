<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>R.A.F.A – Recursos Avançados para Funcionalidade e Acessibilidade</title>
  <style>
    /* Variáveis CSS */
    :root {
      --bg-gradient: linear-gradient(135deg, #7F7FD5, #86A8E7, #91EAE4);
      --text-color: #333;
      --key-bg: #fff;
      --key-border: #4A90E2;
      --key-size: 80px;
      --key-width: 120px;
      --special-key-width: 180px;
      --img-button-size: 200px;
      --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      --transition-speed: 0.3s;
      --sidebar-width: 250px;
      --sidebar-bg: #fff;
      --sidebar-border: #ccc;
      --sidebar-shadow: 0 2px 8px rgba(0,0,0,0.3);
      --highlight-color: #FF6600;
    }
    body.dark {
      --bg-gradient: linear-gradient(135deg, #1C1C1C, #3C3C3C);
      --text-color: #ddd;
      --key-bg: #555;
      --key-border: #aaa;
      --sidebar-bg: #333;
      --sidebar-border: #555;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: var(--font-family);
      background: var(--bg-gradient);
      color: var(--text-color);
      display: flex;
      flex-direction: row;
      min-height: 100vh;
      transition: background var(--transition-speed);
      overflow-x: hidden;
    }
    /* Sidebar com transform para transição suave */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: var(--sidebar-width);
      height: 100%;
      background: var(--sidebar-bg);
      border-right: 1px solid var(--sidebar-border);
      box-shadow: var(--sidebar-shadow);
      transform: translateX(-100%);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      padding: 20px;
      overflow-y: auto;
    }
    .sidebar.open {
      transform: translateX(0);
    }
    .sidebar .close-btn {
      font-size: 1.5em;
      border: none;
      background: none;
      cursor: pointer;
      color: var(--text-color);
      margin-bottom: 20px;
    }
    .sidebar .control-group {
      margin-bottom: 15px;
    }
    .sidebar select,
    .sidebar button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      font-size: 1em;
      border-radius: 6px;
      border: 1px solid var(--key-border);
      background: var(--key-bg);
      cursor: pointer;
      transition: background var(--transition-speed), transform var(--transition-speed);
    }
    .sidebar button:hover,
    .sidebar select:hover {
      background: #e0e0e0;
    }
    /* Botão Hamburger */
    .open-sidebar-btn {
      position: fixed;
      left: 10px;
      top: 10px;
      font-size: 2em;
      background: var(--key-bg);
      border: 2px solid var(--key-border);
      border-radius: 4px;
      cursor: pointer;
      z-index: 1100;
      padding: 5px 10px;
      transition: transform 0.2s;
    }
    .open-sidebar-btn:hover {
      transform: scale(1.1);
    }
    /* Main Content */
    .main-content {
      margin-left: 0;
      width: 100%;
      padding: 20px;
      transition: margin-left var(--transition-speed);
    }
    .sidebar.open ~ .main-content {
      margin-left: var(--sidebar-width);
    }
    /* Exibição e Sugestões */
    .display-container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto 15px;
      text-align: center;
      word-wrap: break-word;
    }
    .display {
      width: 100%;
      padding: 15px;
      font-size: 1.8em;
      border: none;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      outline: none;
      transition: box-shadow var(--transition-speed);
      word-wrap: break-word;
    }
    .display:focus {
      box-shadow: 0 0 0 3px rgba(74,144,226,0.4);
    }
    .suggestions {
      margin-top: 5px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }
    .suggestion {
      background: var(--key-bg);
      border: 1px solid var(--key-border);
      border-radius: 6px;
      padding: 6px 12px;
      cursor: pointer;
      transition: background var(--transition-speed), transform var(--transition-speed);
      font-size: 1.3em;
    }
    .suggestion:hover {
      background: #f0f0f0;
      transform: translateY(-2px);
    }
    /* Teclado Integrado (Alfabético + Numérico + Botões Especiais) */
    .keyboard-container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto 20px;
      background: rgba(255,255,255,0.8);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }
    .key-row {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .key {
      width: var(--key-width);
      height: var(--key-size);
      background: var(--key-bg);
      border: 2px solid var(--key-border);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background var(--transition-speed), transform 0.1s;
      user-select: none;
      font-size: 2em;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .key:active {
      transform: scale(0.95);
      background: #f9f9f9;
    }
    .special-key {
      width: var(--special-key-width);
      height: var(--key-size);
      font-size: 1.5em;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .numeric-keyboard {
      margin-top: 15px;
    }
    /* Botão de Ler em Voz Alta */
    .read-aloud-button {
      width: 100%;
      max-width: 800px;
      margin: 20px auto;
      text-align: center;
    }
    #readAloudBtn {
      padding: 16px 28px;
      font-size: 1.7em;
      font-weight: bold;
      background: var(--highlight-color);
      border: 3px solid darkorange;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      transition: background 0.3s, transform 0.1s;
      color: #fff;
    }
    #readAloudBtn:hover {
      background: darkorange;
      transform: scale(1.05);
    }
    /* Área para botões de imagem/categorias */
    .img-container {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: center;
      margin-bottom: 20px;
    }
    .img-button {
      width: var(--img-button-size);
      height: var(--img-button-size);
      cursor: pointer;
      transition: transform var(--transition-speed), box-shadow var(--transition-speed);
      border: 2px solid var(--key-border);
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      object-fit: cover;
    }
    .img-button:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }
    .back-button {
      padding: 10px 20px;
      font-size: 1.2em;
      background: #FF6666;
      border: 2px solid #CC0000;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      transition: transform 0.1s;
    }
    .back-button:hover {
      transform: scale(1.05);
    }
    /* Overlay de Mapeamento do Corpo com cabeçalho fixo */
    .body-map-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(255,255,255,0.97);
      z-index: 2000;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: auto;
      padding-top: 60px;
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .body-map-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #fff;
      padding: 10px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 2100;
    }
    .body-map-header h2 {
      margin: 0;
      font-size: 1.5em;
      text-align: center;
      flex-grow: 1;
    }
    .body-map-header button {
      padding: 8px 16px;
      font-size: 1em;
      background: #FF6666;
      border: none;
      border-radius: 4px;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }
    .body-map-header button:hover {
      background: #e05555;
    }
    .body-image-container {
      position: relative;
      margin: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .body-image {
      width: 300px;
      height: 600px;
      object-fit: cover;
      display: block;
      border-radius: 8px;
    }
    .marker {
      position: absolute;
      width: 20px;
      height: 20px;
      background: red;
      border: 2px solid white;
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }
   .footer {
      width: 100%;
      text-align: center;
      padding: 15px 10px;
      background-color: rgba(0, 0, 0, 0.05);
      color: #333;
      font-size: 0.9em;
      position: fixed;
      bottom: 0;
      left:  0;
      margin-top: 40px;
      font-style: italic;
    }
  </style>
 <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCXHpzHoMDoHUsSz0HSObSbHx8ueRZ8_F0",
    authDomain: "rafa-bba31.firebaseapp.com",
    projectId: "rafa-bba31",
    storageBucket: "rafa-bba31.firebasestorage.app",
    messagingSenderId: "115601062100",
    appId: "1:115601062100:web:dce8479ec545c4489fa341"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Redireciona se não estiver logado
  onAuthStateChanged(auth, (user) => {
    if (!user) {
      window.location.href = "login.html";
    }
  });
</script>  
</head>
<body>
  <!-- Botão Hamburger -->
  <button id="openSidebarBtn" class="open-sidebar-btn">&#9776;</button>

  <!-- Sidebar -->
  <div id="sidebar" class="sidebar">
    <button id="closeSidebarBtn" class="close-btn">&times;</button>
    <div class="control-group">
      <label for="layoutSelect">Layout do Teclado:</label>
      <select id="layoutSelect">
        <option value="QWERTY">QWERTY</option>
      </select>
    </div>
    <div class="control-group">
      <label for="targetLanguage">Idioma (tradução):</label>
      <select id="targetLanguage">
        <option value="pt">Português</option>
        <option value="en">English</option>
        <option value="es">Español</option>
      </select>
    </div>
    <div class="control-group">
      <button id="themeToggle">Alternar Tema</button>
    </div>
    <div class="control-group">
      <button id="copyBtn">Copiar</button>
      <button id="shareBtn">Compartilhar</button>
    </div>
    <div class="control-group">
      <button id="voiceBtn">Reconhecimento de Voz</button>
    </div>
    <div class="control-group">
      <button id="incSizeBtn">Aumentar Botões</button>
      <button id="decSizeBtn">Diminuir Botões</button>
    </div>
    <!-- Botão de Mapeamento de Dor na Sidebar -->
    <div class="control-group">
       </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Campo de exibição e sugestões -->
    <div class="display-container">
      <input type="text" id="display" class="display" placeholder="Sua frase aparecerá aqui..." readonly>
      <div class="suggestions" id="suggestions"></div>
    </div>

    <!-- Teclado Integrado (Alfabético + Numérico + Botões Especiais) -->
    <div class="keyboard-container" id="keyboardContainer">
      <div id="alphabetKeyboard"></div>
      <div id="numericKeyboard" class="numeric-keyboard"></div>
      <div class="key-row">
        <div class="key special-key" id="backspaceKey">Back</div>
        <div class="key special-key" id="spaceKey">Espaço</div>
        <div class="key special-key" id="clearKey">Limpar</div>
      </div>
    </div>

    <!-- Botão de Ler em Voz Alta (abaixo do teclado) -->
    <div class="read-aloud-button">
      <button id="readAloudBtn">Ler em Voz Alta</button>
    </div>

    <!-- Menu de Categorias -->
    <h2 style="text-align: center;">Menu de Categorias</h2>
    <div class="img-container" id="categoryContainer">
     <img src="https://8upload.com/preview/67deab9da55c3/Call_doctor__7_.jpg" alt="Respostas" class="img-button" data-category="respostas">
    <img src="https://8upload.com/preview/67deeb4b67214/Call_doctor__15_.jpg" alt="Perguntas" class="img-button" data-category="perguntas">
    <img src="https://8upload.com/preview/67e4b4ce7c20c/Call_doctor__14_.jpg" alt="tabela" class="img-button" data-category="tabela"> 
    <img src="https://8upload.com/preview/67deaa0417e7c/Call_doctor__6_.jpg" alt="Chamar" class="img-button" data-category="chamar">
    <img src="https://8upload.com/preview/67e4b94b4d1ed/Call_doctor__21_.jpg" alt="Dor" class="img-button" data-category="dor">
    <img src="https://8upload.com/preview/67deac3a63ee6/Call_doctor__8_.jpg" alt="Mobilidade" class="img-button" data-category="mobilidade">
    <img src="https://8upload.com/preview/67deadf6a9bb9/Call_doctor__9_.jpg" alt="Comida" class="img-button" data-category="comida">
    <img src="https://8upload.com/preview/67e4b7724d679/Call_doctor__20_.jpg" alt="Corpo" class="img-button" data-category="corpo">
    </div>

    <!-- Container para imagens de categoria -->
    <div id="imgContainer" class="img-container">
      <!-- Imagens da categoria serão renderizadas aqui -->
    </div>
  </div>

  <!-- Overlay de Mapeamento do Corpo -->
 
  <!-- Elemento de áudio -->
  <audio id="beepSound" src="https://www.soundjay.com/button/beep-07.wav"></audio>

  <script>
    // Elementos comuns
    const displayField = document.getElementById('display');
    const keyboardContainer = document.getElementById('keyboardContainer');
    const alphabetKeyboard = document.getElementById('alphabetKeyboard');
    const numericKeyboard = document.getElementById('numericKeyboard');
    const layoutSelect = document.getElementById('layoutSelect');
    const targetLanguageSelect = document.getElementById('targetLanguage');
    const suggestionsDiv = document.getElementById('suggestions');
    const beepSound = document.getElementById('beepSound');
    const themeToggle = document.getElementById('themeToggle');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const voiceBtn = document.getElementById('voiceBtn');
    const readAloudBtn = document.getElementById('readAloudBtn');
    const incSizeBtn = document.getElementById('incSizeBtn');
    const decSizeBtn = document.getElementById('decSizeBtn');

    // Sidebar
    const sidebar = document.getElementById('sidebar');
    const openSidebarBtn = document.getElementById('openSidebarBtn');
    const closeSidebarBtn = document.getElementById('closeSidebarBtn');

    // Categorias
    const categoryContainer = document.getElementById('categoryContainer');
    const imgContainer = document.getElementById('imgContainer');

    // Overlay de Mapeamento do Corpo
    const bodyMapSection = document.getElementById('bodyMapSection');
    const frontBody = document.getElementById('frontBody');
    const backBody = document.getElementById('backBody');

    // Layouts do teclado
    const layouts = {
      "QWERTY": [
        ["Q","W","E","R","T","Y","U","I","O","P"],
        ["A","S","D","F","G","H","J","K","L"],
        ["Z","X","C","V","B","N","M"]
      ],
      "AZERTY": [
        ["A","Z","E","R","T","Y","U","I","O","P"],
        ["Q","S","D","F","G","H","J","K","L","M"],
        ["W","X","C","V","B","N"]
      ],
      "NUMERIC": [
        ["1","2","3"],
        ["4","5","6"],
        ["7","8","9"],
        ["0"]
      ]
    };

    // Sugestões para autocompletar
    const wordSuggestions = ["Eu", "quero", "comer", "beber", "dormir", "brincar", "jogar", "aprender", "correr", "obrigado"];

     // Dados de imagens para cada categoria
    const categories = {
      chamar: [
        {
          src: "https://8upload.com/preview/67e140be68b8e/Call_doctor__1_.jpg",
          alt: "Chamar o médico",
          phrase: "Chamar o médico"
        },
        {
          src: "https://8upload.com/preview/67e1413d1fb19/Call_doctor__2_.jpg",
          alt: "Chamar o fisioterapeuta",
          phrase: "Chamar o fisioterapeuta"
        },
        {
          src: "https://8upload.com/preview/67e1410f2b2a5/nurse.jpg",
          alt: "Chamar Enfermagem",
          phrase: "Chamar Enfermagem"
        },
       {
          src: "https://8upload.com/preview/67e456016bb90/Call_doctor__12_.jpg",
          alt: "Falar com minha família",
          phrase: "Falar com minha família"
        }
      ],
      perguntas: [
        {
          src: "https://8upload.com/preview/67deec028dd00/Call_doctor__16_.jpg",
          alt: "Onde",
          phrase: "Onde eu estou?"
        },
        {
          src: "https://8upload.com/preview/67deec64d8746/Call_doctor__17_.jpg",
          alt: "Dia",
          phrase: "Que dia é hoje?"
        },
        {
          src: "https://8upload.com/preview/67deec9827c31/Call_doctor__18_.jpg",
          alt: "Acontecendo",
          phrase: "O que está acontecendo?"
        },
        {
          src: "https://8upload.com/preview/67deecb9eb1f8/Call_doctor__19_.jpg",
          alt: "Como",
          phrase: "Como eu estou?"
        },
        {
          src: "https://8upload.com/preview/67deecd532eef/Call_doctor__20_.jpg",
          alt: "Por que",
          phrase: "Por que estou aqui?"
        }
      ],
      respostas: [
        {
          src: "https://8upload.com/preview/67e4563bb0623/Call_doctor__13_.jpg",
          alt: "Não",
          phrase: "Não"
        },
        {
          src: "https://8upload.com/preview/67e1407e07c58/Call_doctor.jpg",
          alt: "Sim",
          phrase: "Sim"
        },
        {
          src: "https://8upload.com/preview/67e4566d8bbda/Call_doctor__14_.jpg",
          alt: "Talvez",
          phrase: "Talvez eu não sei"
        }
      ],
      dor: [
      {
          src: "https://8upload.com/preview/67e4ba43751ae/Call_doctor__22_.jpg",
          alt: "Óculos",
          phrase: "Eu quero meus óculos"
        },
          {
          src: "https://8upload.com/preview/67e4ba96a32ed/Call_doctor__23_.jpg",
          alt: "Auditivo",
          phrase: "Eu quero meu aparelho auditivo"
        },
          {
          src: "https://8upload.com/preview/67e4bac6a9112/Call_doctor__24_.jpg",
          alt: "Ligar",
          phrase: "Eu quero que ligue a luz"
        },
                  {
          src: "https://8upload.com/preview/67e4bb0487497/Call_doctor__25_.jpg",
          alt: "Apague",
          phrase: "Eu quero que apague a luz"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/ventilation-9483703__340.jpg",
          alt: "Eu quero ser aspirado",
          phrase: "Eu quero ser aspirado"
        },
        {
          src: "https://8upload.com/preview/67e141b87b1ed/Call_doctor__4_.jpg",
          alt: "fralda",
          phrase: "Eu quero que troque a fralda"
        },

        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/oxygen-9483701__340.jpg",
          alt: "Eu quero oxigênio",
          phrase: "Eu quero oxigênio"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/cold-9483712__340.jpg",
          alt: "Estou com frio",
          phrase: "Estou com frio"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/sun-9483704__340.jpg",
          alt: "Estou com calor",
          phrase: "Estou com calor"
        },
        {
          src: "https://8upload.com/preview/67e141f7d4e0c/Call_doctor__5_.jpg",
          alt: "Medo",
          phrase: "Estou com medo"
        }
      ],
    tabela: [
        {
          src: "https://8upload.com/preview/67e4b5129a8e0/Call_doctor__15_.jpg",
          alt: "Televisão",
          phrase: "Quero assistir televisão"
        },
        {
          src: "https://8upload.com/preview/67e4b54a5159d/Call_doctor__16_.jpg",
          alt: "Rádio",
          phrase: "Quero ouvir rádio"
        },
        {
          src: "https://8upload.com/preview/67e4b596ce836/Call_doctor__17_.jpg",
          alt: "Livro",
          phrase: "Quero ler um livro"
        },
        {
          src: "https://8upload.com/preview/67e4b5d5d4bb7/Call_doctor__18_.jpg",
          alt: "Palavra",
          phrase: "Quero fazer palavra cruzada"
        }
      ],
 corpo: [
          {
          src: "https://8upload.com/preview/67e4569a1ea22/Call_doctor__15_.jpg",
          alt: "Dor de cabeça",
          phrase: "Estou com dor de cabeça"
        },
        {
          src: "https://8upload.com/preview/67e456bbe3ae1/Call_doctor__16_.jpg",
          alt: "Dor nas costas",
          phrase: "Estou com dor nas costas"
        },
        {
          src: "https://8upload.com/preview/67e456f8db4ae/Call_doctor.png",
          alt: "Dor na barriga",
          phrase: "Estou com dor na barriga"
        },
        {
          src: "https://8upload.com/preview/67e45743d2db1/Call_doctor__17_.jpg",
          alt: "Dor no peito",
          phrase: "Estou com dor no peito"
        },
        {
          src: "https://8upload.com/preview/67e1417339df6/Call_doctor__3_.jpg",
          alt: "Falta de ar",
          phrase: "Estou com falta de ar"
        },
        {
          src: "https://8upload.com/preview/67def225e099e/Call_doctor__24_.jpg",
          alt: "Agulha",
          phrase: "Sinto dor em agulhada"
        },
        {
          src: "https://8upload.com/preview/67def27fa973e/Call_doctor__26_.jpg",
          alt: "Queimação",
          phrase: "Sinto dor em queimação"
        },
       {
          src: "https://8upload.com/preview/67deb953ba218/Call_doctor__14_.jpg",
          alt: "Dor",
          phrase: "Está doendo"
        },
        {
          src: "https://8upload.com/preview/67deb90a0190f/Call_doctor__13_.jpg",
          alt: "Coçar",
          phrase: "Está coçando"
        },
        {
          src: "https://8upload.com/preview/67deb36898536/38.jpg",
          alt: "Cabeça",
          phrase: "Cabeça"
        },
        {
          src: "https://8upload.com/preview/67deb3cb78a50/39.jpg",
          alt: "Tronco",
          phrase: "Tronco"
        },
      {
          src: "https://8upload.com/preview/67deb47983de9/40.jpg",
          alt: "Costas",
          phrase: "Costas"
        },

      {
          src: "https://8upload.com/preview/67deb56d9b295/43.jpg",
          alt: "Pernas",
          phrase: "Pernas"
        },
      {
          src: "https://8upload.com/preview/67deb5139f957/42.jpg",
          alt: "Quadril",
          phrase: "Quadril"
        },
      {
          src: "https://8upload.com/preview/67deb612268d1/44.jpg",
          alt: "Pés",
          phrase: "Pés"
        },
      {
          src: "https://8upload.com/preview/67deb68a974d0/Call_doctor__12_.jpg",
          alt: "Mãos",
          phrase: "Mãos"
        },
        {
          src: "https://8upload.com/preview/67deb4f4d56e7/41.jpg",
          alt: "Braços",
          phrase: "Braços"
        }
      ],

 comida: [
        {
          src: "https://8upload.com/preview/67e455ce3f996/Call_doctor__11_.jpg",
          alt: "Estou com fome",
          phrase: "Estou com fome"
        },
        {
          src: "https://8upload.com/preview/67e455372483b/Call_doctor__10_.jpg",
          alt: "Estou com sede",
          phrase: "Estou com sede"
        },
      {
          src: "https://8upload.com/preview/67deaeeb6b03d/Call_doctor__11_.jpg",
          alt: "Açúcar",
          phrase: "Precisa de açúcar"
        },
        {
          src: "https://8upload.com/preview/67deaeab93941/Call_doctor__10_.jpg",
          alt: "Sal",
          phrase: "Precisa de sal"
        },
   {
          src: "https://8upload.com/preview/67e4b11e34c6f/Call_doctor__11_.jpg",
          alt: "Talheres",
          phrase: "Eu preciso de talheres"
        },
     {
          src: "https://8upload.com/preview/67e4b0c9a0225/Call_doctor__10_.jpg",
          alt: "Está frio",
          phrase: "Está frio"
        },
   {
          src: "https://8upload.com/preview/67e4b085cb91c/Call_doctor__9_.jpg",
          alt: "Está quente",
          phrase: "Está quente"
        },
       {
          src: "https://8upload.com/preview/67e4b047753bf/Call_doctor__8_.jpg",
          alt: "Não gostei",
          phrase: "Não gostei"
        },
    {
          src: "https://8upload.com/preview/67e4b01d318db/Call_doctor__7_.jpg",
          alt: "Gostei",
          phrase: "Gostei"
        },
     {
          src: "https://8upload.com/preview/67e4afe219e49/Call_doctor__6_.jpg",
          alt: "Água",
          phrase: "Quero beber suco"
        },
      {
          src: "https://8upload.com/preview/67e4b1d0c38f6/Call_doctor__12_.jpg",
          alt: "Leite",
          phrase: "Quero beber leite"
        },
         {
          src: "https://8upload.com/preview/67e4b219152a8/Call_doctor__13_.jpg",
          alt: "Café",
          phrase: "Quero beber café"
        },
    {
          src: "https://8upload.com/preview/67e4afaea0ca2/Call_doctor__5_.jpg",
          alt: "Água",
          phrase: "Quero beber água"
        },
        {
          src: "https://8upload.com/preview/67e4af67b910b/Call_doctor__4_.jpg",
          alt: "Lanche",
          phrase: "Quero lanchar"
        },     
   {
          src: "https://8upload.com/preview/67e4af2a6a7a1/Call_doctor__3_.jpg",
          alt: "vegetais",
          phrase: "Quero comer vegetais"
        },
      {
          src: "https://8upload.com/preview/67e4aee3e5dbb/Call_doctor__2_.jpg",
          alt: "frutas",
          phrase: "Quero comer frutas"
        },
        {
          src: "https://8upload.com/preview/67e4ae8d48056/Call_doctor__1_.jpg",
          alt: "janta",
          phrase: "Quero almoçar ou jantar"
        },
        {
          src: "https://8upload.com/preview/67e4ae4161f6a/Call_doctor.jpg",
          alt: "Café",
          phrase: "Quero café da manhã"
        }
      ],
      mobilidade: [
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/shower-9483702__340.jpg",
          alt: "banho",
          phrase: "Eu quero tomar banho"
        },
{
          src: "https://8upload.com/preview/67e16f44c0e11/Call_doctor__6_.jpg",
          alt: "direita",
          phrase: "Eu quero virar para a direita"
        },
{
          src: "https://8upload.com/preview/67e16f9271462/Call_doctor__7_.jpg",
          alt: "esquerda",
          phrase: "Eu quero virar para a esquerda"
        },
{
          src: "https://8upload.com/preview/67e17033e5add/Call_doctor__8_.jpg",
          alt: "cabeceira",
          phrase: "Eu quero que eleve a cabeceira"
        },
{
          src: "https://8upload.com/preview/67e170989d81a/Call_doctor__9_.jpg",
          alt: "abaixar",
          phrase: "Eu quero que abaixe a cabeceira"
        },
       {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/bathroom-9483698__340.jpg",
          alt: "banheiro",
          phrase: "Eu quero ir ao banheiro"
        },

        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/sit-9483716__340.jpg",
          alt: "Eu quero sentar",
          phrase: "Eu quero sentar"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/walking-9483711__340.jpg",
          alt: "Eu quero andar",
          phrase: "Eu quero andar"
        }
      ]
    };

    // Renderiza o teclado alfabético
    function renderAlphabetKeyboard() {
      alphabetKeyboard.innerHTML = "";
      const rows = layouts["QWERTY"];
      if (!rows) return;
      rows.forEach(row => {
        const rowDiv = document.createElement('div');
        rowDiv.classList.add('key-row');
        row.forEach(key => {
          const btn = document.createElement('div');
          btn.classList.add('key');
          btn.textContent = key;
          btn.addEventListener('click', () => {
            playFeedback();
            displayField.value += key;
            updateSuggestions();
          });
          rowDiv.appendChild(btn);
        });
        alphabetKeyboard.appendChild(rowDiv);
      });
    }
    // Renderiza o teclado numérico
    function renderNumericKeyboard() {
      numericKeyboard.innerHTML = "";
      const rows = layouts["NUMERIC"];
      if (!rows) return;
      rows.forEach(row => {
        const rowDiv = document.createElement('div');
        rowDiv.classList.add('key-row');
        row.forEach(key => {
          const btn = document.createElement('div');
          btn.classList.add('key');
          btn.textContent = key;
          btn.addEventListener('click', () => {
            playFeedback();
            displayField.value += key;
            updateSuggestions();
          });
          rowDiv.appendChild(btn);
        });
        numericKeyboard.appendChild(rowDiv);
      });
    }
    // Renderiza o teclado completo
    function renderKeyboard() {
      renderAlphabetKeyboard();
      renderNumericKeyboard();
    }
    renderKeyboard();

    // Eventos para teclas especiais
    document.getElementById('backspaceKey')?.addEventListener('click', () => {
      playFeedback();
      displayField.value = displayField.value.slice(0, -1);
      updateSuggestions();
    });
    document.getElementById('spaceKey')?.addEventListener('click', () => {
      playFeedback();
      displayField.value += ' ';
      updateSuggestions();
    });
    document.getElementById('clearKey')?.addEventListener('click', () => {
      playFeedback();
      displayField.value = '';
      updateSuggestions();
    });

    // Função para tocar feedback sonoro
    function playFeedback() {
      beepSound.currentTime = 0;
      beepSound.play();
    }
    // Atualiza sugestões
    function updateSuggestions() {
      suggestionsDiv.innerHTML = "";
      const words = displayField.value.split(" ");
      const lastFragment = words[words.length - 1].toLowerCase();
      if (!lastFragment) return;
      const matches = wordSuggestions.filter(word => word.toLowerCase().startsWith(lastFragment));
      matches.forEach(match => {
        const sug = document.createElement('div');
        sug.classList.add('suggestion');
        sug.textContent = match;
        sug.addEventListener('click', () => {
          words[words.length - 1] = match;
          displayField.value = words.join(" ") + " ";
          suggestionsDiv.innerHTML = "";
        });
        suggestionsDiv.appendChild(sug);
      });
    }
    // Função para ler em voz alta
    function speakText() {
      const text = displayField.value;
      if (text.trim() !== "") {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = "pt-BR";
        window.speechSynthesis.speak(utterance);
      }
    }
    // Função para traduzir usando LibreTranslate
    function translateText(text, targetLang) {
      const sourceLang = "pt";
      if (sourceLang === targetLang) return Promise.resolve(text);
      return fetch('https://libretranslate.de/translate', {
        method: 'POST',
        body: JSON.stringify({
          q: text,
          source: sourceLang,
          target: targetLang,
          format: "text"
        }),
        headers: { "Content-Type": "application/json" }
      })
      .then(response => response.json())
      .then(data => data.translatedText);
    }
    // Eventos de controle
    layoutSelect.addEventListener('change', () => {
      renderKeyboard();
    });
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
    });
    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(displayField.value);
        alert("Texto copiado!");
      } catch (err) {
        alert("Erro ao copiar o texto.");
      }
    });
    shareBtn.addEventListener('click', async () => {
      if (navigator.share) {
        try {
          await navigator.share({ text: displayField.value });
        } catch (err) {
          alert("Compartilhamento cancelado ou falhou.");
        }
      } else {
        alert("Web Share API não suportada neste dispositivo.");
      }
    });
    voiceBtn.addEventListener('click', () => {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) {
        alert("API de reconhecimento de voz não suportada neste navegador.");
        return;
      }
      const recognition = new SpeechRecognition();
      recognition.lang = "pt-BR";
      recognition.start();
      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        const targetLang = targetLanguageSelect.value;
        translateText(transcript, targetLang).then(translated => {
          displayField.value += translated + " ";
          updateSuggestions();
          speakText();
        });
      };
      recognition.onerror = () => {
        alert("Erro no reconhecimento de voz.");
      };
    });
    readAloudBtn.addEventListener('click', () => {
      speakText();
    });
    // Sidebar eventos
    openSidebarBtn.addEventListener('click', () => {
      sidebar.classList.add('open');
    });
    closeSidebarBtn.addEventListener('click', () => {
      sidebar.classList.remove('open');
    });
    // Funções para renderizar categorias
    function renderCategoryImages(category) {
      categoryContainer.style.display = "none";
      imgContainer.style.display = "flex";
      imgContainer.innerHTML = "";
      const backBtn = document.createElement('button');
      backBtn.textContent = "Voltar ao Menu";
      backBtn.classList.add('back-button');
      backBtn.addEventListener('click', () => {
        imgContainer.style.display = "none";
        categoryContainer.style.display = "flex";
      });
      imgContainer.appendChild(backBtn);
      categories[category].forEach(item => {
        const img = document.createElement('img');
        img.src = item.src;
        img.alt = item.alt;
        img.classList.add('img-button');
        img.setAttribute('data-phrase', " " + item.phrase + " ");
        img.addEventListener('click', () => {
          playFeedback();
          displayField.value = item.phrase;
          updateSuggestions();
          speakText();
        });
        imgContainer.appendChild(img);
      });
    }
    const categoryButtons = document.querySelectorAll('#categoryContainer .img-button');
    categoryButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const category = btn.getAttribute('data-category');
        if (category && categories[category]) {
          renderCategoryImages(category);
        }
      });
    });
    // Eventos para botões de imagem fora de categorias
    const generalImgButtons = document.querySelectorAll('#imgContainer img:not([data-category])');
    generalImgButtons.forEach(img => {
      img.addEventListener('click', () => {
        const phrase = img.getAttribute('data-phrase') || "";
        playFeedback();
        displayField.value = phrase;
        updateSuggestions();
        speakText();
      });
    });
    // Função para atualizar tamanhos dos botões
    function updateButtonSizes(delta) {
      const rootStyles = getComputedStyle(document.documentElement);
      let keySize = parseInt(rootStyles.getPropertyValue('--key-size'));
      let keyWidth = parseInt(rootStyles.getPropertyValue('--key-width'));
      let specialKeyWidth = parseInt(rootStyles.getPropertyValue('--special-key-width'));
      let imgButtonSize = parseInt(rootStyles.getPropertyValue('--img-button-size'));
      keySize = Math.max(60, keySize + delta);
      keyWidth = Math.max(80, keyWidth + delta * 1.5);
      specialKeyWidth = Math.max(100, specialKeyWidth + delta * 2);
      imgButtonSize = Math.max(120, imgButtonSize + delta * 2);
      document.documentElement.style.setProperty('--key-size', keySize + "px");
      document.documentElement.style.setProperty('--key-width', keyWidth + "px");
      document.documentElement.style.setProperty('--special-key-width', specialKeyWidth + "px");
      document.documentElement.style.setProperty('--img-button-size', imgButtonSize + "px");
    }
    incSizeBtn.addEventListener('click', () => { updateButtonSizes(10); });
    decSizeBtn.addEventListener('click', () => { updateButtonSizes(-10); });

    // Funções para mapeamento do corpo (overlay)
    function openBodyMap() {
      // Oculta o conteúdo principal
      document.querySelector('.main-content').style.display = "none";
      // Exibe o overlay de mapeamento do corpo
      bodyMapSection.style.display = "flex";
    }
    function closeBodyMap() {
      // Remove marcadores, se houver
      const markers = bodyMapSection.querySelectorAll('.marker');
      markers.forEach(m => m.remove());
      // Oculta o overlay e restaura o conteúdo principal
      bodyMapSection.style.display = "none";
      document.querySelector('.main-content').style.display = "block";
    }
    function addMarker(event) {
      const container = event.currentTarget;
      const existingMarker = container.querySelector('.marker');
      if (existingMarker) { existingMarker.remove(); }
      const marker = document.createElement('div');
      marker.classList.add('marker');
      const rect = container.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;
      marker.style.left = x + 'px';
      marker.style.top = y + 'px';
      container.appendChild(marker);
      // Efeito sonoro: dizer "Dói aqui"
      const utterance = new SpeechSynthesisUtterance("Dói aqui");
      utterance.lang = "pt-BR";
      window.speechSynthesis.speak(utterance);
    }
    frontBody.addEventListener('click', addMarker);
    backBody.addEventListener('click', addMarker);
</script>
    <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCXHpzHoMDoHUsSz0HSObSbHx8ueRZ8_F0",
    authDomain: "rafa-bba31.firebaseapp.com",
    projectId: "rafa-bba31",
    storageBucket: "rafa-bba31.firebasestorage.app",
    messagingSenderId: "115601062100",
    appId: "1:115601062100:web:dce8479ec545c4489fa341"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.logout = () => {
    signOut(auth)
      .then(() => {
        window.location.href = "login.html";
      })
      .catch((error) => {
        alert("Erro ao sair: " + error.message);
      });
  };
  </script>

    <footer class="footer">
    <p>Rodrigo Cavalcante - CREFITO 2 / 242633-F - Fisioterapeuta - CER LEBLON</p>
  </footer>
</script>
</body>
</html>
