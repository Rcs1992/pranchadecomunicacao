<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Quadro de Comunicação Alternativa Virtual e Multifuncional</title>
  <style>
    /* Variáveis CSS para facilitar o ajuste dos tamanhos e cores */
    :root {
      --bg-gradient: linear-gradient(135deg, #7F7FD5, #86A8E7, #91EAE4);
      --text-color: #333;
      --key-bg: #fff;
      --key-border: #4A90E2;
      --key-size: 90px;            /* Altura das teclas */
      --key-width: 140px;          /* Largura das teclas */
      --special-key-width: 220px;   /* Largura para teclas especiais */
      --img-button-size: 220px;     /* Tamanho dos botões de imagem */
      --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      --transition-speed: 0.3s;
    }

    body.dark {
      --bg-gradient: linear-gradient(135deg, #1C1C1C, #3C3C3C);
      --text-color: #ddd;
      --key-bg: #555;
      --key-border: #aaa;
    }

    body {
      margin: 0;
      padding: 20px;
      font-family: var(--font-family);
      background: var(--bg-gradient);
      color: var(--text-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      transition: background var(--transition-speed);
    }

    h2 {
      margin-bottom: 10px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
      text-align: center;
    }

    /* Campo de exibição e sugestões */
    .display-container {
      width: 90%;
      max-width: 800px;
      margin-bottom: 15px;
      text-align: center;
    }

    .display {
      width: 100%;
      padding: 15px;
      font-size: 1.8em;
      border: none;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      outline: none;
      transition: box-shadow var(--transition-speed);
    }

    .display:focus {
      box-shadow: 0 0 0 3px rgba(74,144,226,0.4);
    }

    .suggestions {
      margin-top: 5px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    .suggestion {
      background: var(--key-bg);
      border: 1px solid var(--key-border);
      border-radius: 6px;
      padding: 6px 12px;
      cursor: pointer;
      transition: background var(--transition-speed), transform var(--transition-speed);
      font-size: 1.3em;
    }

    .suggestion:hover {
      background: #f0f0f0;
      transform: translateY(-2px);
    }

    /* Contêiner dos controles */
    .controls {
      margin-bottom: 20px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .controls button, .controls select {
      padding: 10px 16px;
      font-size: 1.1em;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: var(--key-bg);
      border: 2px solid var(--key-border);
      transition: background var(--transition-speed), transform var(--transition-speed);
    }

    .controls button:hover, .controls select:hover {
      background: #e0e0e0;
      transform: scale(1.05);
    }

    /* Botão de Ler em Voz Alta em destaque */
    .read-aloud-container {
      margin-bottom: 20px;
      width: 90%;
      max-width: 800px;
      text-align: center;
    }

    #readAloudBtn {
      padding: 14px 24px;
      font-size: 1.5em;
      font-weight: bold;
      background: #FFCC00;
      border: 3px solid #E6B800;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
      transition: background 0.3s, transform 0.1s;
    }

    #readAloudBtn:hover {
      background: #FFD633;
      transform: scale(1.05);
    }

    /* Área do teclado */
    .keyboard-container {
      width: 90%;
      max-width: 800px;
      margin-bottom: 20px;
      background: rgba(255,255,255,0.8);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }

    .key-row {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .key {
      width: var(--key-width);
      height: var(--key-size);
      background: var(--key-bg);
      border: 2px solid var(--key-border);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background var(--transition-speed), transform 0.1s;
      user-select: none;
      font-size: 2em;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .key:active {
      transform: scale(0.95);
      background: #f9f9f9;
    }

    /* Teclas especiais */
    .special-key {
      width: var(--special-key-width);
      height: var(--key-size);
      font-size: 1.5em;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Área para botões de imagem ou categorias */
    .img-container {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .img-button {
      width: var(--img-button-size);
      height: var(--img-button-size);
      cursor: pointer;
      transition: transform var(--transition-speed), box-shadow var(--transition-speed);
      border: 2px solid var(--key-border);
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      object-fit: cover;
    }

    .img-button:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }

    /* Botão de voltar para o menu principal da categoria */
    .back-button {
      padding: 10px 20px;
      font-size: 1.2em;
      background: #FF6666;
      border: 2px solid #CC0000;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      transition: transform 0.1s;
    }

    .back-button:hover {
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <!-- Campo de exibição e sugestões -->
  <div class="display-container">
    <input type="text" id="display" class="display" placeholder="Sua frase aparecerá aqui..." readonly>
    <div class="suggestions" id="suggestions"></div>
  </div>

  <!-- Botão de Ler em Voz Alta em destaque -->
  <div class="read-aloud-container">
    <button id="readAloudBtn">Ler em Voz Alta</button>
  </div>

  <!-- Controles restantes -->
  <div class="controls">
    <select id="layoutSelect">
      <option value="QWERTY">QWERTY</option>
      <option value="AZERTY">AZERTY</option>
      <option value="NUMERIC">Numérico</option>
    </select>

    </select>
    <button id="themeToggle">Alternar Tema</button>
    <button id="copyBtn">Copiar</button>
    <button id="shareBtn">Compartilhar</button>
    <button id="voiceBtn">Reconhecimento de Voz</button>
    <button id="incSizeBtn">Aumentar Botões</button>
    <button id="decSizeBtn">Diminuir Botões</button>
  </div>

  <!-- Área do teclado -->
  <div class="keyboard-container" id="keyboardContainer">
    <!-- As teclas serão renderizadas via JavaScript -->
  </div>

  <!-- Área para as categorias de botões de imagem -->
  <h2>Menu de Categorias</h2>
  <div class="img-container" id="categoryContainer">
    <!-- Botões de categoria: cada um possui data-category para identificar a categoria -->
    <img src="https://8upload.com/preview/67deab9da55c3/Call_doctor__7_.jpg" alt="Respostas" class="img-button" data-category="respostas">
    <img src="https://8upload.com/preview/67deeb4b67214/Call_doctor__15_.jpg" alt="Perguntas" class="img-button" data-category="perguntas">
    <img src="https://8upload.com/preview/67def03d8aff2/Call_doctor__21_.jpg" alt="tabela" class="img-button" data-category="tabela"> 
    <img src="https://8upload.com/preview/67deaa0417e7c/Call_doctor__6_.jpg" alt="Chamar" class="img-button" data-category="chamar">
    <img src="https://8upload.com/preview/67dea93306d15/Call_doctor__5_.jpg" alt="Dor" class="img-button" data-category="dor">
    <img src="https://8upload.com/preview/67deac3a63ee6/Call_doctor__8_.jpg" alt="Mobilidade" class="img-button" data-category="mobilidade">
    <img src="https://8upload.com/preview/67deadf6a9bb9/Call_doctor__9_.jpg" alt="Comida" class="img-button" data-category="comida">
    <img src="https://8upload.com/preview/67deb2b51163e/37.jpg" alt="Corpo" class="img-button" data-category="corpo">
      </div>

  <!-- Área para os botões de imagem dentro de uma categoria -->
  <div class="img-container" id="imagesContainer" style="display: none;">
    <!-- Botões serão renderizados via JavaScript -->
  </div>

  <!-- Elemento de áudio para feedback sonoro -->
  <audio id="beepSound" src="https://www.soundjay.com/button/beep-07.wav"></audio>

  <script>
    const displayField = document.getElementById('display');
    const keyboardContainer = document.getElementById('keyboardContainer');
    const layoutSelect = document.getElementById('layoutSelect');
    const targetLanguageSelect = document.getElementById('targetLanguage');
    const suggestionsDiv = document.getElementById('suggestions');
    const beepSound = document.getElementById('beepSound');
    const themeToggle = document.getElementById('themeToggle');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const voiceBtn = document.getElementById('voiceBtn');
    const readAloudBtn = document.getElementById('readAloudBtn');
    const incSizeBtn = document.getElementById('incSizeBtn');
    const decSizeBtn = document.getElementById('decSizeBtn');

    // Containers para as categorias e para as imagens de uma categoria
    const categoryContainer = document.getElementById('categoryContainer');
    const imagesContainer = document.getElementById('imagesContainer');

    // Layouts do teclado
    const layouts = {
      "QWERTY": [
        ["Q","W","E","R","T","Y","U","I","O","P"],
        ["A","S","D","F","G","H","J","K","L"],
        ["Z","X","C","V","B","N","M"]
      ],
      "AZERTY": [
        ["A","Z","E","R","T","Y","U","I","O","P"],
        ["Q","S","D","F","G","H","J","K","L","M"],
        ["W","X","C","V","B","N"]
      ],
      "NUMERIC": [
        ["1","2","3"],
        ["4","5","6"],
        ["7","8","9"],
        ["0"]
      ]
    };

    // Sugestões para autocompletar
    const wordSuggestions = ["Eu", "quero", "comer", "beber", "dormir", "brincar", "jogar", "aprender", "correr", "obrigado"];

    // Dados de imagens para cada categoria
    const categories = {
      chamar: [
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/22/19-22-41-622_1280.jpg",
          alt: "Chamar o médico",
          phrase: "Chamar o médico"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/19-56-29-71_1280.jpg",
          alt: "Chamar o fisioterapeuta",
          phrase: "Chamar o fisioterapeuta"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/20/08/20-08-40-829_1280.jpg",
          alt: "Chamar Enfermagem",
          phrase: "Chamar Enfermagem"
        },
       {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/family-9483713__340.jpg",
          alt: "Falar com minha família",
          phrase: "Falar com minha família"
        }
      ],
      perguntas: [
        {
          src: "https://8upload.com/preview/67deec028dd00/Call_doctor__16_.jpg",
          alt: "Onde",
          phrase: "Onde eu estou?"
        },
        {
          src: "https://8upload.com/preview/67deec64d8746/Call_doctor__17_.jpg",
          alt: "Dia",
          phrase: "Que dia é hoje?"
        },
        {
          src: "https://8upload.com/preview/67deec9827c31/Call_doctor__18_.jpg",
          alt: "Acontecendo",
          phrase: "O que está acontecendo?"
        },
        {
          src: "https://8upload.com/preview/67deecb9eb1f8/Call_doctor__19_.jpg",
          alt: "Como",
          phrase: "Como eu estou?"
        },
        {
          src: "https://8upload.com/preview/67deecd532eef/Call_doctor__20_.jpg",
          alt: "Por que",
          phrase: "Por que estou aqui?"
        }
      ],
      respostas: [
        {
          src: "https://cdn.pixabay.com/photo/2025/03/21/00/26/00-26-58-936__340.jpg",
          alt: "Não",
          phrase: "Não"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/21/00/26/00-26-52-375__340.jpg",
          alt: "Sim",
          phrase: "Sim"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/21/00/27/00-27-00-582__340.jpg",
          alt: "Talvez",
          phrase: "Talvez eu não sei"
        }
      ],
      dor: [
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/stress-9483709_1280.jpg",
          alt: "Dor de cabeça",
          phrase: "Estou com dor de cabeça"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/back-9483717__340.jpg",
          alt: "Dor nas costas",
          phrase: "Estou com dor nas costas"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/pain-9483710__340.jpg",
          alt: "Dor na barriga",
          phrase: "Estou com dor na barriga"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/chest-9483697__340.jpg",
          alt: "Dor no peito",
          phrase: "Estou com dor no peito"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/19-56-29-848__340.jpg",
          alt: "Falta de ar",
          phrase: "Estou com falta de ar"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/ventilation-9483703__340.jpg",
          alt: "Eu quero ser aspirado",
          phrase: "Eu quero ser aspirado"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/21/00/21/00-21-15-70__340.jpg",
          alt: "fralda",
          phrase: "Eu quero que troque a fralda"
        },

        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/oxygen-9483701__340.jpg",
          alt: "Eu quero oxigênio",
          phrase: "Eu quero oxigênio"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/cold-9483712__340.jpg",
          alt: "Estou com frio",
          phrase: "Estou com frio"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/sun-9483704__340.jpg",
          alt: "Estou com calor",
          phrase: "Estou com calor"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/21/00/08/00-08-33-672__340.jpg",
          alt: "Medo",
          phrase: "Estou com medo"
        }
      ],
    tabela: [
        {
          src: "https://8upload.com/preview/67def1faa63af/Call_doctor__23_.jpg",
          alt: "Coça",
          phrase: "Sinto coceira"
        },
        {
          src: "https://8upload.com/preview/67def225e099e/Call_doctor__24_.jpg",
          alt: "Agulha",
          phrase: "Sinto dor em agulhada"
        },
        {
          src: "https://8upload.com/preview/67def24b11f4a/Call_doctor__25_.jpg",
          alt: "Geral",
          phrase: "Dói"
        },
        {
          src: "https://8upload.com/preview/67def27fa973e/Call_doctor__26_.jpg",
          alt: "Queimação",
          phrase: "Sinto dor em queimação"
        },
       {
          src: "https://8upload.com/preview/67def2ad45a8e/Call_doctor.png",
          alt: "Mexer",
          phrase: "Não consigo mexer"
        }
      ],
 corpo: [
        {
          src: "https://8upload.com/preview/67deb953ba218/Call_doctor__14_.jpg",
          alt: "Dor",
          phrase: "Está doendo"
        },
        {
          src: "https://8upload.com/preview/67deb90a0190f/Call_doctor__13_.jpg",
          alt: "Coçar",
          phrase: "Está coçando"
        },
        {
          src: "https://8upload.com/preview/67deb36898536/38.jpg",
          alt: "Cabeça",
          phrase: "Cabeça"
        },
        {
          src: "https://8upload.com/preview/67deb3cb78a50/39.jpg",
          alt: "Tronco",
          phrase: "Tronco"
        },
      {
          src: "https://8upload.com/preview/67deb47983de9/40.jpg",
          alt: "Costas",
          phrase: "Costas"
        },

      {
          src: "https://8upload.com/preview/67deb56d9b295/43.jpg",
          alt: "Pernas",
          phrase: "Pernas"
        },
      {
          src: "https://8upload.com/preview/67deb5139f957/42.jpg",
          alt: "Quadril",
          phrase: "Quadril"
        },
      {
          src: "https://8upload.com/preview/67deb612268d1/44.jpg",
          alt: "Pés",
          phrase: "Pés"
        },
      {
          src: "https://8upload.com/preview/67deb68a974d0/Call_doctor__12_.jpg",
          alt: "Mãos",
          phrase: "Mãos"
        },
        {
          src: "https://8upload.com/preview/67deb4f4d56e7/41.jpg",
          alt: "Braços",
          phrase: "Braços"
        }
      ],

 comida: [
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/hungry-9483699__340.jpg",
          alt: "Estou com fome",
          phrase: "Estou com fome"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/21/00/10/00-10-32-788__340.jpg",
          alt: "Estou com sede",
          phrase: "Estou com sede"
        },
      {
          src: "https://8upload.com/preview/67deaeeb6b03d/Call_doctor__11_.jpg",
          alt: "Açúcar",
          phrase: "Precisa de açúcar"
        },
        {
          src: "https://8upload.com/preview/67deaeab93941/Call_doctor__10_.jpg",
          alt: "Sal",
          phrase: "Precisa de sal"
        }
      ],
      mobilidade: [
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/shower-9483702__340.jpg",
          alt: "banho",
          phrase: "Eu quero tomar banho"
        },
       {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/bathroom-9483698__340.jpg",
          alt: "banheiro",
          phrase: "Eu quero ir ao banheiro"
        },

        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/sit-9483716__340.jpg",
          alt: "Eu quero sentar",
          phrase: "Eu quero sentar"
        },
        {
          src: "https://cdn.pixabay.com/photo/2025/03/20/19/56/walking-9483711__340.jpg",
          alt: "Eu quero andar",
          phrase: "Eu quero andar"
        }
      ]
    };

    // Função para renderizar o teclado (mesmo de antes)
    function renderKeyboard(layoutName) {
      keyboardContainer.innerHTML = "";
      const rows = layouts[layoutName];
      if (!rows) return;
      rows.forEach(row => {
        const rowDiv = document.createElement('div');
        rowDiv.classList.add('key-row');
        row.forEach(key => {
          const btn = document.createElement('div');
          btn.classList.add('key');
          btn.textContent = key;
          btn.addEventListener('click', () => {
            playFeedback();
            displayField.value += key;
            updateSuggestions();
          });
          rowDiv.appendChild(btn);
        });
        keyboardContainer.appendChild(rowDiv);
      });
      // Linha de teclas especiais
      const specialRow = document.createElement('div');
      specialRow.classList.add('key-row');
      const backspace = document.createElement('div');
      backspace.classList.add('key', 'special-key');
      backspace.textContent = 'Back';
      backspace.addEventListener('click', () => {
        playFeedback();
        displayField.value = displayField.value.slice(0, -1);
        updateSuggestions();
      });
      specialRow.appendChild(backspace);
      const space = document.createElement('div');
      space.classList.add('key', 'special-key');
      space.textContent = 'Espaço';
      space.addEventListener('click', () => {
        playFeedback();
        displayField.value += ' ';
        updateSuggestions();
      });
      specialRow.appendChild(space);
      const clear = document.createElement('div');
      clear.classList.add('key', 'special-key');
      clear.textContent = 'Limpar';
      clear.addEventListener('click', () => {
        playFeedback();
        displayField.value = '';
        updateSuggestions();
      });
      specialRow.appendChild(clear);
      keyboardContainer.appendChild(specialRow);
    }

    // Função para tocar feedback sonoro
    function playFeedback() {
      beepSound.currentTime = 0;
      beepSound.play();
    }

    // Atualiza as sugestões de autocompletar
    function updateSuggestions() {
      suggestionsDiv.innerHTML = "";
      const words = displayField.value.split(" ");
      const lastFragment = words[words.length - 1].toLowerCase();
      if (!lastFragment) return;
      const matches = wordSuggestions.filter(word => word.toLowerCase().startsWith(lastFragment));
      matches.forEach(match => {
        const sug = document.createElement('div');
        sug.classList.add('suggestion');
        sug.textContent = match;
        sug.addEventListener('click', () => {
          words[words.length - 1] = match;
          displayField.value = words.join(" ") + " ";
          suggestionsDiv.innerHTML = "";
        });
        suggestionsDiv.appendChild(sug);
      });
    }

    // Função para ler em voz alta
    function speakText() {
      const text = displayField.value;
      if (text.trim() !== "") {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = "pt-BR";
        window.speechSynthesis.speak(utterance);
      }
    }

    // Função para traduzir texto (usando LibreTranslate)
    function translateText(text, targetLang) {
      const sourceLang = "pt"; // Supondo que o reconhecimento seja em português
      if (sourceLang === targetLang) return Promise.resolve(text);
      return fetch('https://libretranslate.de/translate', {
        method: 'POST',
        body: JSON.stringify({
          q: text,
          source: sourceLang,
          target: targetLang,
          format: "text"
        }),
        headers: { "Content-Type": "application/json" }
      })
      .then(response => response.json())
      .then(data => data.translatedText);
    }

    // Eventos de controle
    layoutSelect.addEventListener('change', () => {
      renderKeyboard(layoutSelect.value);
    });

    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
    });

    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(displayField.value);
        alert("Texto copiado!");
      } catch (err) {
        alert("Erro ao copiar o texto.");
      }
    });

    shareBtn.addEventListener('click', async () => {
      if (navigator.share) {
        try {
          await navigator.share({ text: displayField.value });
        } catch (err) {
          alert("Compartilhamento cancelado ou falhou.");
        }
      } else {
        alert("Web Share API não suportada neste dispositivo.");
      }
    });

    voiceBtn.addEventListener('click', () => {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) {
        alert("API de reconhecimento de voz não suportada neste navegador.");
        return;
      }
      const recognition = new SpeechRecognition();
      recognition.lang = "pt-BR";
      recognition.start();
      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        const targetLang = targetLanguageSelect.value;
        translateText(transcript, targetLang).then(translated => {
          displayField.value += translated + " ";
          updateSuggestions();
          speakText();
        });
      };
      recognition.onerror = () => {
        alert("Erro no reconhecimento de voz.");
      };
    });

    // Botão de Ler em Voz Alta
    readAloudBtn.addEventListener('click', () => {
      speakText();
    });

    // Eventos para os botões de imagem do menu principal de categorias
    const categoryButtons = document.querySelectorAll('#categoryContainer .img-button');
    categoryButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const category = btn.getAttribute('data-category');
        if (category && categories[category]) {
          renderCategoryImages(category);
        }
      });
    });

    // Função para renderizar as imagens de uma categoria e incluir um botão de voltar
    function renderCategoryImages(category) {
      // Esconde o menu principal de categorias
      categoryContainer.style.display = "none";
      // Exibe o container de imagens de categoria
      imagesContainer.style.display = "flex";
      imagesContainer.innerHTML = ""; // Limpa o container

      // Cria um botão de voltar
      const backBtn = document.createElement('button');
      backBtn.textContent = "Voltar ao Menu";
      backBtn.classList.add('back-button');
      backBtn.addEventListener('click', () => {
        imagesContainer.style.display = "none";
        categoryContainer.style.display = "flex";
      });
      imagesContainer.appendChild(backBtn);

      // Renderiza cada imagem da categoria
      categories[category].forEach(item => {
        const img = document.createElement('img');
        img.src = item.src;
        img.alt = item.alt;
        img.classList.add('img-button');
        img.setAttribute('data-phrase', " " + item.phrase + " ");
        img.addEventListener('click', () => {
          playFeedback();
          displayField.value = item.phrase; // Substitui o conteúdo anterior
          updateSuggestions();
          speakText();
        });
        imagesContainer.appendChild(img);
      });
    }

    // Eventos para os botões de imagem no menu principal (para categorias)
    const mainMenuImgButtons = document.querySelectorAll('#imgContainer .img-button');
    mainMenuImgButtons.forEach(img => {
      img.addEventListener('click', () => {
        const category = img.getAttribute('data-category');
        if (category && categories[category]) {
          renderCategoryImages(category);
        }
      });
    });

    // Eventos para botões de imagem (se estiverem fora de categorias)
    const imgButtons = document.querySelectorAll('#imgContainer img:not([data-category])');
    imgButtons.forEach(img => {
      img.addEventListener('click', () => {
        const phrase = img.getAttribute('data-phrase') || "";
        playFeedback();
        displayField.value = phrase;
        updateSuggestions();
        speakText();
      });
    });

    // Função para atualizar dinamicamente os tamanhos dos botões
    function updateButtonSizes(delta) {
      const rootStyles = getComputedStyle(document.documentElement);
      let keySize = parseInt(rootStyles.getPropertyValue('--key-size'));
      let keyWidth = parseInt(rootStyles.getPropertyValue('--key-width'));
      let specialKeyWidth = parseInt(rootStyles.getPropertyValue('--special-key-width'));
      let imgButtonSize = parseInt(rootStyles.getPropertyValue('--img-button-size'));
      
      keySize = Math.max(60, keySize + delta);
      keyWidth = Math.max(80, keyWidth + delta * 1.5);
      specialKeyWidth = Math.max(100, specialKeyWidth + delta * 2);
      imgButtonSize = Math.max(120, imgButtonSize + delta * 2);
  
      document.documentElement.style.setProperty('--key-size', keySize + "px");
      document.documentElement.style.setProperty('--key-width', keyWidth + "px");
      document.documentElement.style.setProperty('--special-key-width', specialKeyWidth + "px");
      document.documentElement.style.setProperty('--img-button-size', imgButtonSize + "px");
    }
  
    incSizeBtn.addEventListener('click', () => {
      updateButtonSizes(10);
    });
  
    decSizeBtn.addEventListener('click', () => {
      updateButtonSizes(-10);
    });
  
    // Renderiza o teclado inicial com o layout padrão selecionado
    renderKeyboard(layoutSelect.value);
  </script>
</body>
</html>
